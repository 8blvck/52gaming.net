_={},_.token=$('meta[name="csrf-token"]').attr('content'),_.domain='/',_.locale=$('html').attr('lang'),_.ajaxurl=_.domain+(_.locale.length?_.locale+'/':'')+'ajax',_.bootloader='<div class="bootloader no-image"><span class="process"><div class="spinner-wrapper"></div></span></div>',_.ajax=function(a,b){$.ajax({url:this.ajaxurl,type:'post',data:a,headers:{'X-CSRF-TOKEN':this.token},dataType:'json',success:function(c){'ok'==c.status?b(null,c):b(c,null)},error:function(){b(null,null)}})},_.ajaxy=function(a,b){$.ajax({url:this.ajaxurl,type:'post',data:a,headers:{'X-CSRF-TOKEN':this.token},dataType:'json',cache:!1,contentType:!1,processData:!1,success:function(c){'ok'==c.status?b(null,c):b(c,null)},error:function(){b(null,null)}})},_.blackListTable=function(a,b){a=a||1,b=b||$('#black-list-table');let c=b.find('.table-pagination'),d=b.find('tbody'),f=$(this.bootloader),g=$('#black-list-search').val()||'';b.css({position:'relative'}).append(f),this.ajax({action:'blackList',search:g,page:a},function(h,j){j?(d.html(j.html),c.html(j.pagination)):d.html($('<tr class="text-center">').html($('<td colspan="99">').html(h.message))),f.remove()})},_.blackListRequest=function(a){if(a){a.preventDefault();var b=$(a.currentTarget).closest('form'),c=b.find('.response'),d=b.find('[name="username"]'),f=b.find('[name="email"]'),g=b.find('[name="comment"]'),h=b.find('[name="files[]"]');if(b.find('*').removeClass('required'),!d.val())return d.focus().parent().addClass('required');if(!f.val().isEmail())return f.focus().parent().addClass('required');if(!h[0].files.length)return b.find('[name="files[]"]').focus().parent().addClass('required');var j=new FormData(b[0]);j.set('action','blackListRequest'),b.addClass('submited'),this.ajaxy(j,function(k,l){l?(c.html(l.message),b[0].reset()):c.html(k.message),setTimeout(function(){b.removeClass('submited').find('.dropzone').removeClass('dropped'),c.html(c.attr('data-default'))},4e3)})}},_.boostersTopTable=function(a){let b=a.find('tbody'),c=$('#boosters-payout-amount'),d=$('#boosters-payout-currency'),f=$(this.bootloader);a.css({position:'relative'}).append(f),this.ajax({action:'boostersTop'},function(g,h){h?(b.html(h.html),c.html(h.total),d.html(h.currency)):b.html($('<tr class="text-center">').html($('<td colspan="99">').html(g.message))),f.remove()})},_.boosterRequest=function(a){if(a){a.preventDefault();var b=$(a.currentTarget).closest('form'),c=b.find('.response'),d=b.find('[name="game"]'),f=b.find('[name="username"]'),g=b.find('[name="email"]'),h=b.find('[name="nickname"]'),j=b.find('[name="vkontakte"]'),k=b.find('[name="facebook"]'),l=b.find('[name="discord"]'),m=b.find('[name="skype"]'),n=b.find('[name="telegram"]'),o=b.find('[name="exp"]:checked'),p=b.find('[name="exp_source"]'),q=b.find('[name="play_hours"]'),r=b.find('[name="play_week"]'),s=b.find('[name="comment"]');if(b.find('*').removeClass('required'),!parseInt(d.val()))return d.focus().parent().addClass('required');if(!f.val())return f.focus().parent().addClass('required');if(!g.val().isEmail())return g.focus().parent().addClass('required');if(!l.val().length&&!m.val().length&&!n.val().length)return l.focus().parent().addClass('required');var t={action:'boosterRequest',game:d.val()||null,username:f.val()||null,email:g.val()||null,nickname:h.val()||null,vkontakte:j.val()||null,facebook:k.val()||null,discord:l.val()||null,skype:m.val()||null,telegram:n.val()||null,exp:o.val()||null,exp_source:p.val()||null,play_hours:q.val()||null,play_week:r.val()||null,comment:s.val()||null};b.addClass('submited'),this.ajax(t,function(u,v){v?(c.html(v.message),b[0].reset()):c.html(u.message),setTimeout(function(){b.removeClass('submited'),c.html(c.attr('data-default'))},4e3)})}},_.partnerRequest=function(a){if(a){a.preventDefault();var b=$(a.currentTarget).closest('form'),c=b.find('.response'),d=b.find('[name="games[]"]:checked'),f=d.map(function(){return parseInt(this.value)}).get(),g=b.find('[name="username"]'),h=b.find('[name="email"]'),j=b.find('[name="service_link"]'),k=b.find('[name="comment"]');if(b.find('*').removeClass('required'),!g.val())return g.focus().parent().addClass('required');if(!j.val().isUrl())return j.focus().parent().addClass('required');if(!h.val().isEmail())return h.focus().parent().addClass('required');if(!f.length)return b.find('[name="games[]"]:enabled').parent().addClass('required');var l={action:'partnerRequest',games:f,username:g.val()||null,email:h.val()||null,service:j.val()||null,comment:k.val()||null};b.addClass('submited'),this.ajax(l,function(m,n){n?(c.html(n.message),b[0].reset()):c.html(m.message),setTimeout(function(){b.removeClass('submited'),c.html(c.attr('data-default'))},4e3)})}},$(document).ready(function(){if($('#black-list-table').length&&_.blackListTable(1,$('#black-list-table')),$('#boosters-top-table').length&&_.boostersTopTable($('#boosters-top-table')),$('.games-selector').length&&$('.games-selector .item').on('click',function(d){d.preventDefault(),$(this).closest('.games-selector').find('.item').removeClass('active'),$(this).addClass('active')}),$('.games-selector .slick').length){var a=parseInt($('.games-selector .slick').attr('data-shown'))||6,b='true'==$('.games-selector .slick').attr('data-autoplay'),c=!!$('.games-selector .dots').length;$('.games-selector .slick').slick({infinite:b,autoplay:b,autoplaySpeed:2e3,dots:c,appendDots:'.games-selector .dots',slidesToShow:a,slidesToScroll:1,arrows:!0,prevArrow:'.games-selector .prev',nextArrow:'.games-selector .next',responsive:[{breakpoint:1024,settings:{slidesToShow:5,slidesToScroll:1,infinite:!1}},{breakpoint:800,settings:{slidesToShow:4,slidesToScroll:1,infinite:!1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:1,infinite:!1}}]})}$('.dropzone').on('dragover',function(){$(this).addClass('hover')}),$('.dropzone').on('dragleave',function(){$(this).removeClass('hover')}),$('.dropzone input').on('change',function(){var f=this.files,g=[];if($('.dropzone').removeClass('hover'),!f)return this.value='',void $('.dropzone').removeClass('dropped');for(var j,h=0;j=f[h];h++)/^image\/(gif|png|jpeg)$/i.test(j.type)&&this.accept&&0<=$.inArray(j.type,this.accept.split(/, ?/))&&g.push(j);g.length?$('.dropzone').addClass('dropped'):$('.dropzone').removeClass('dropped'),$('.dropzone img').remove();for(var j,k,h=0;j=g[h];h++)k=new FileReader(j),k.readAsDataURL(j),k.onload=function(l){var m=l.target.result,n=$('<img />').attr('src',m);$('.dropzone .cover').append(n)}})}),String.prototype.isEmail=function(){var a=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return a.test(this)},String.prototype.isUrl=function(){var a=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return a.test(this)};